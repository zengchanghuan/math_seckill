# 使用网页版 AI 工具生成题目指南

## 🎯 快速开始

本指南将帮助你使用网页版 AI 工具（智谱AI、通义千问、文心一言、Kimi等）生成微积分题目并添加到题库。

---

## 📋 准备工作

### 1. 选择 AI 工具（推荐国内可用）

- **智谱AI** (推荐): <https://open.bigmodel.cn/>
- **通义千问**: <https://tongyi.aliyun.com/>
- **文心一言**: <https://yiyan.baidu.com/>
- **Kimi**: <https://kimi.moonshot.cn/>

### 2. 打开提示词模板

打开文件：`tools/ai_prompt_template.md`，复制提示词模板。

---

## 🚀 详细步骤

### 步骤 1: 复制提示词模板

复制以下提示词（或从 `tools/ai_prompt_template.md` 复制）：

```
请生成 10 道关于"导数基础"的微积分选择题，难度为"基础"。

要求：
1. 每道题目必须是选择题，包含4个选项（A、B、C、D）
2. 题目使用 LaTeX 格式，数学公式用 $...$ 包裹
3. 选项也使用 LaTeX 格式
4. 必须包含详细的解答过程（使用 LaTeX 格式）
5. 题目要有一定难度，符合"基础"水平

输出格式为 JSON 数组，每个题目包含以下字段：
- question: 题目内容（LaTeX 格式）
- options: 四个选项的数组（LaTeX 格式），正确答案放在第一个位置
- answer: 正确答案（"A"、"B"、"C" 或 "D"）
- solution: 详细解答（LaTeX 格式，使用 \n 换行）
- tags: 标签数组

示例格式：
[
  {
    "question": "求函数 $f(x) = x^2 + 3x + 2$ 的导数。",
    "options": [
      "$2x + 3$",
      "$x + 3$",
      "$2x^2 + 3$",
      "$x^2 + 3$"
    ],
    "answer": "A",
    "solution": "使用基本求导法则：\n$f'(x) = \frac{d}{dx}(x^2) + \frac{d}{dx}(3x) + \frac{d}{dx}(2)$\n$f'(x) = 2x + 3 + 0 = 2x + 3$",
    "tags": ["导数", "多项式"]
  }
]

请只输出 JSON 数组，不要包含其他文字说明。
```

### 步骤 2: 修改提示词参数

根据你的需求修改以下内容：

1. **题目数量**: 将 `10 道` 改为你需要的数量（建议每次 10-20 道）
2. **主题**: 将 `"导数基础"` 改为：
   - `"导数基础"`
   - `"极限与连续"`
   - `"积分"`
3. **难度**: 将 `"基础"` 改为：
   - `"基础"`
   - `"进阶"`

**示例修改**：

```
请生成 15 道关于"极限与连续"的微积分选择题，难度为"进阶"。
```

### 步骤 3: 在 AI 工具中使用

1. **打开 AI 工具网页**（如智谱AI: https://open.bigmodel.cn/）
2. **粘贴修改后的提示词**
3. **点击发送/生成**
4. **等待 AI 生成结果**

### 步骤 4: 复制生成的 JSON

AI 会返回 JSON 格式的题目数组，类似这样：

```json
[
  {
    "question": "求函数 $f(x) = x^3 + 2x$ 的导数。",
    "options": [
      "$3x^2 + 2$",
      "$x^2 + 2$",
      "$3x^2$",
      "$x^3 + 2$"
    ],
    "answer": "A",
    "solution": "使用基本求导法则：\n$f'(x) = 3x^2 + 2$",
    "tags": ["导数", "多项式"]
  },
  ...
]
```

**注意**:

- 如果 AI 返回的 JSON 被包裹在代码块中（```json ...```），需要去掉代码块标记
- 如果 AI 返回了其他文字说明，只复制 JSON 部分

### 步骤 5: 添加到题库

#### 方法 A: 使用 Python 脚本（推荐）

1. **保存生成的 JSON 到临时文件**:

   ```bash
   # 将 AI 生成的 JSON 保存到文件
   # 例如保存到 tools/temp_problems.json
   ```

2. **运行合并脚本**:

   ```bash
   cd /Users/zengchanghuan/Desktop/workspace/flutter/math_seckill
   python3 tools/merge_problems.py tools/temp_problems.json "导数基础" "基础"
   ```

#### 方法 B: 手动添加（如果脚本不可用）

1. **打开题库文件**:

   ```bash
   # 文件路径: assets/data/problems.json
   ```

2. **找到最后一个题目**（当前最后一个 ID 是 p45）

3. **在最后一个题目后面添加逗号，然后粘贴新题目**:

   ```json
   {
     "id": "p46",  // 注意：需要手动更新 ID
     "topic": "导数基础",  // 确保主题正确
     "difficulty": "基础",  // 确保难度正确
     "question": "...",
     "answer": "A",
     "options": [...],
     "solution": "...",
     "tags": [...]
   }
   ```

4. **更新题目 ID**:
   - 新题目的 ID 必须从 p46 开始，依次递增（p46, p47, p48, ...）
   - 确保 ID 连续，不重复

5. **确保 JSON 格式正确**:
   - 最后一个题目后面不要有逗号
   - 整个 JSON 数组用 `[]` 包裹
   - 每个题目用 `{}` 包裹

### 步骤 6: 验证题目格式

运行验证工具检查格式：

```bash
cd /Users/zengchanghuan/Desktop/workspace/flutter/math_seckill
python3 tools/validate_problems.py
```

如果验证通过，你会看到：

```
✓ 所有题目验证通过！
```

如果验证失败，检查错误信息并修复。

---

## 📝 批量生成建议

### 按主题和难度分批生成

为了达到 500 道题的目标，建议按以下顺序生成：

1. **导数基础 - 基础** (需要约 84 道)
   - 每次生成 15-20 道
   - 生成 5-6 次

2. **导数基础 - 进阶** (需要约 54 道)
   - 每次生成 15-20 道
   - 生成 3-4 次

3. **极限与连续 - 基础** (需要约 87 道)
   - 每次生成 15-20 道
   - 生成 5-6 次

4. **极限与连续 - 进阶** (需要约 52 道)
   - 每次生成 15-20 道
   - 生成 3-4 次

5. **积分 - 基础** (需要约 84 道)
   - 每次生成 15-20 道
   - 生成 5-6 次

6. **积分 - 进阶** (需要约 49 道)
   - 每次生成 15-20 道
   - 生成 3-4 次

### 提示词模板快速切换

你可以准备几个常用的提示词模板：

**模板 1: 导数基础 - 基础**

```
请生成 15 道关于"导数基础"的微积分选择题，难度为"基础"。
[复制完整的提示词模板]
```

**模板 2: 极限与连续 - 进阶**

```
请生成 15 道关于"极限与连续"的微积分选择题，难度为"进阶"。
[复制完整的提示词模板]
```

---

## 🔍 常见问题

### Q1: AI 返回的 JSON 格式不正确怎么办？

**A**:

- 检查 JSON 是否被代码块包裹（```json ...```），去掉代码块标记
- 检查是否有其他文字说明，只保留 JSON 部分
- 使用在线 JSON 验证工具检查格式：<https://jsonlint.com/>

### Q2: 如何确保题目 ID 连续？

**A**:

- 每次添加新题目前，查看当前最后一个题目的 ID
- 新题目的 ID 从下一个数字开始
- 例如：当前最后一个是 p45，新题目从 p46 开始

### Q3: 如何快速检查当前题目数量？

**A**:
运行以下命令：

```bash
python3 -c "import json; data = json.load(open('assets/data/problems.json')); print(f'当前题目数: {len(data)} 道')"
```

### Q4: 如何查看某个主题的题目数量？

**A**:
运行验证工具：

```bash
python3 tools/validate_problems.py
```

会显示按主题和难度的分布统计。

---

## 💡 效率提升技巧

1. **批量生成**: 每次生成 15-20 道题目，减少操作次数
2. **使用模板**: 准备几个常用模板，快速切换
3. **及时验证**: 每添加一批题目后立即验证，及时发现问题
4. **备份数据**: 添加题目前备份 `assets/data/problems.json`

---

## 📚 相关文档

- `tools/ai_prompt_template.md` - 提示词模板
- `tools/EXPANSION_STATUS.md` - 扩展状态和进度
- `tools/BATCH_GENERATE_500_GUIDE.md` - 批量生成指南（使用 API）

---

## ✅ 检查清单

每次生成题目后，检查以下项目：

- [ ] JSON 格式正确
- [ ] 题目 ID 连续递增
- [ ] 主题和难度正确
- [ ] 每个题目有 4 个选项
- [ ] 答案格式正确（A/B/C/D）
- [ ] LaTeX 格式正确（$...$ 包裹）
- [ ] 运行验证工具通过

---

**祝你生成顺利！** 🚀
